== Enhanced Retrieval Extension 2.1.4 ==

=== Requirements ===
* PHP 7.x
* Composer
* MediaWiki 1.31.x - 1.33.x
* SMW 3.1.x
* Apache SOLR server v8.30+  

	You can setup your own Solr server. Please use the SOLR-schema given in:
		solr-config.zip (tested with Solr 8.30)
		
=== Installation Instructions ===

* Run in MW root folder:

	composer require diqa/enhanced-retrieval
 
* Add to your LocalSettings.php:
  $smwgEnabledDeferredUpdate = false;

* Start the SOLR server 

* Create a file proxy/env.php with the following content: (adjust the values of course)

-----------------------------------------------------------------------------------
<?php
	global $SOLRhost, $SOLRport, $SOLRuser, $SOLRpass, $SOLRcore;
	$SOLRhost = 'localhost';
	$SOLRport = 8983;
	$SOLRuser = '';
	$SOLRpass = '';
	$SOLRcore = 'mw';

	global $wgServer, $wgScriptPath, $wgDBname;
	$wgServer = "http://wimawiki.local";
	$wgScriptPath = "/mediawiki";
	$wgDBname = 'wima_wiki';
	
-----------------------------------------------------------------------------------

	Note: SOLRuser / SOLRpass / SOLRcore are optional, default is empty. 
		  Default SOLR port is 8983. Default host is "localhost"

* Create the initial index:
	php {wiki-path}/extensions/EnhancedRetrieval/maintenance/updateSOLR.php -v
	
	OR via composer:
	
	cd {wiki-path}/extensions/EnhancedRetrieval
	composer run-script update

That's it.

=== Troubleshooting ===

SSL users: Sometimes servers are configured to not allow *local* HTTPS requests but only HTTP.
		   In this case set in proxy/env.php 
		   
		   $wgServerHTTP = http://....
		   $wgHTTPAuthForLocalProxies = true;

HTTP Auth: If the wiki is protected by Basic Auth, set $fsgHTTPAuth

			$fsgHTTPAuth = "user:pass";
			
